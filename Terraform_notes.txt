====================================================
DAY 9 ‚Äì TERRAFORM BASICS üåç
Infrastructure as Code (IaC)
====================================================

====================================================
1. WHY TERRAFORM?
====================================================

Problem with manual infrastructure ‚ùå:
‚Ä¢ Creating infra via cloud portals is slow
‚Ä¢ Hard to replicate across environments (dev, test, prod)
‚Ä¢ Dependency on specific engineers
‚Ä¢ High chance of human errors
‚Ä¢ No proper change tracking
‚Ä¢ Difficult to manage multi-cloud setups

Solution ‚úÖ:
Terraform = Infrastructure as Code (IaC)

Benefits:
‚Ä¢ Infrastructure defined as code (scripts)
‚Ä¢ Automated & repeatable
‚Ä¢ Same code for all environments
‚Ä¢ Easy collaboration
‚Ä¢ Version control friendly
‚Ä¢ Supports multi-cloud:
  - AWS
  - Azure
  - GCP
  - Many more

====================================================
2. WHAT IS TERRAFORM?
====================================================

‚Ä¢ Open-source IaC tool by HashiCorp
‚Ä¢ Automates:
  - Creating infrastructure
  - Updating infrastructure
  - Maintaining infrastructure
‚Ä¢ Cloud-agnostic (works across providers)

====================================================
3. TERRAFORM MODULES
====================================================

Definition:
‚Ä¢ Any folder containing at least one `.tf` file
  ‚Üí is a Terraform module

Key points:
‚Ä¢ `.tf` extension is mandatory
‚Ä¢ File name doesn‚Äôt matter (main.tf, providers.tf, etc.)
‚Ä¢ Modules are:
  - Reusable
  - Shareable
  - Versionable

Examples:
‚Ä¢ One module for VPC / VNET
‚Ä¢ One module for VM
‚Ä¢ One module for DB

Module Dependencies:
‚Ä¢ One module can call another module
‚Ä¢ Helps break infra into smaller, manageable components

====================================================
4. PROVIDERS
====================================================

What is a Provider?
‚Ä¢ A plugin that allows Terraform to talk to:
  - Cloud providers (AWS, Azure, GCP)
  - Other services

Examples:
‚Ä¢ Azure Provider
‚Ä¢ AWS Provider

Important:
‚Ä¢ Providers must be initialized before use
‚Ä¢ Installed automatically during `terraform init`

====================================================
5. TERRAFORM STATE FILE (MOST IMPORTANT)
====================================================

What is State?
‚Ä¢ Terraform uses state to track:
  - What infrastructure exists
  - What Terraform manages

State File:
‚Ä¢ Stored as a JSON file
‚Ä¢ Contains:
  - List of resources
  - Current infrastructure state

Why State Matters:
‚Ä¢ Enables idempotency
‚Ä¢ Terraform knows:
  - What already exists
  - What needs to be created/updated/deleted

Example:
‚Ä¢ If a resource is deleted manually in cloud
‚Ä¢ Next Terraform run will recreate it

IMPORTANT RULE ‚ùó:
‚ùå Never manually edit the state file
‚úÖ Only modify state via Terraform commands

====================================================
6. TERRAFORM WORKFLOW
====================================================

1Ô∏è‚É£ Write Terraform code (.tf files)
2Ô∏è‚É£ Initialize:
   terraform init
   ‚Ä¢ Downloads providers
   ‚Ä¢ Prepares working directory

3Ô∏è‚É£ Plan:
   terraform plan
   ‚Ä¢ Shows what changes will happen

4Ô∏è‚É£ Apply:
   terraform apply
   ‚Ä¢ Creates or updates infrastructure
   ‚Ä¢ Generates/updates state file

====================================================
7. LOCAL vs REMOTE STATE
====================================================

Local State ‚ùå:
‚Ä¢ Stored on one engineer‚Äôs machine
‚Ä¢ Not suitable for teams

Remote State ‚úÖ (Best Practice):
‚Ä¢ Shared storage for state file
‚Ä¢ All team members use same state

Common Backends:
‚Ä¢ AWS S3
‚Ä¢ Terraform Cloud
‚Ä¢ Azure Storage
‚Ä¢ Google Cloud Storage

====================================================
8. STATE LOCKING
====================================================

Problem:
‚Ä¢ Two engineers running Terraform at same time
‚Ä¢ Can corrupt state file

Solution:
‚Ä¢ Enable state locking

How it works:
‚Ä¢ State file is locked during execution
‚Ä¢ Unlocked after command completes

Examples:
‚Ä¢ AWS S3 uses DynamoDB for locking
‚Ä¢ Not all backends support locking

====================================================
9. STATE BACKUPS & VERSIONING
====================================================

Risk:
‚Ä¢ State file corruption
‚Ä¢ Accidental deletion

Best Practice:
‚Ä¢ Enable versioning on state backend

Benefits:
‚Ä¢ Automatic backups
‚Ä¢ History of state changes
‚Ä¢ Ability to restore previous state

====================================================
10. MULTIPLE ENVIRONMENTS
====================================================

Best Practice:
‚Ä¢ One state file per environment

Examples:
‚Ä¢ dev ‚Üí dev.tfstate
‚Ä¢ test ‚Üí test.tfstate
‚Ä¢ prod ‚Üí prod.tfstate

Why?
‚Ä¢ Isolation
‚Ä¢ Reduced risk
‚Ä¢ Cleaner management

====================================================
11. TERRAFORM + GIT (GITOPS)
====================================================

Infrastructure as Code = Code üí°

Best Practices:
‚Ä¢ Store Terraform code in Git
‚Ä¢ Separate repo or same repo as app
‚Ä¢ Track changes via commits
‚Ä¢ Enable collaboration

Benefits:
‚Ä¢ Version history
‚Ä¢ Rollbacks
‚Ä¢ Team collaboration

====================================================
12. CODE REVIEWS & CI
====================================================

Treat Terraform code like application code:
‚Ä¢ Pull requests / merge requests
‚Ä¢ Code reviews
‚Ä¢ Testing via CI pipelines

Why?
‚Ä¢ Prevents mistakes
‚Ä¢ Improves quality
‚Ä¢ Shared ownership

====================================================
13. CONTINUOUS DEPLOYMENT (CD)
====================================================

‚ùå Bad Practice:
‚Ä¢ Engineers running terraform apply locally

‚úÖ Best Practice:
‚Ä¢ Terraform commands run only via CD pipeline

Benefits:
‚Ä¢ Single source of truth
‚Ä¢ Controlled infrastructure changes
‚Ä¢ Audit-friendly

====================================================
14. KEY TAKEAWAYS
====================================================

‚Ä¢ Terraform automates infrastructure
‚Ä¢ Modules make infra reusable
‚Ä¢ Providers connect Terraform to clouds
‚Ä¢ State file is critical ‚Äì handle with care
‚Ä¢ Always use:
  - Remote state
  - Locking
  - Backups
‚Ä¢ One state per environment
‚Ä¢ Store Terraform code in Git
‚Ä¢ Apply changes via CI/CD only

====================================================
END ‚Äì DAY 9 TERRAFORM NOTES üöÄ
====================================================
